<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/x-icon" href="images/favicon.ico">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <link rel="stylesheet" href="css/hojaConfig.css" type="text/css">
  <link rel="stylesheet" href="css/hojaColor.css" type="text/css">
  <link rel="stylesheet" href="css/hojaAnalog.css" type="text/css">
  <link rel="stylesheet" href="css/hojaRemap.css" type="text/css">
  <link rel="stylesheet" href="/css/sliderPicker.css" type="text/css">
  <link rel="stylesheet" href="/css/radioPicker.css" type="text/css">
  <link rel="stylesheet" href="/css/containers.css" type="text/css">

  <link rel="stylesheet" href="/css/spooky/spooky.css" type="text/css">

  <!-- Meta Tags required for
       Progressive Web App -->
  <meta name="apple-mobile-web-app-status-bar" content="#aa7700">
  <meta name="theme-color" content="black">

  <!-- Manifest File link -->
  <link rel="manifest" href="manifest.json">
</head>

<body>
  <div class="context">

    <ul class="circles">
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
    </ul>

    <h1>{title}</h1>

    <div class="box">
      <div class="box-inner">
        <div id="hoja-top-row">
          <div id="offline-indicator" disabled="true">Offline Mode</div>
        </div>
        <button type="button" id="langButton" onclick="changeLang(1)">JP</button>

        <button type="button" id="installButton" onclick="installButton()" disabled="true">{install}</button>
        <div class="row">
          <button type="button" id="connectButton" onclick="connectButton()">{connect}</button>
          <button type="button" id="disconnectButton" onclick="disconnectButton()" disabled>{disconnect}</button>
        </div>

        <!-- FW Update Message Box -->
        <div class="message-box" id="ood" disabled="true">

          <h2>{fwMsg1}</h2>
          {fwMsg2}
          <button type="button" id="fwButton" onclick="fwButton()">{bootloader}</button>
          <div class="full-width">
            <div class="line"></div>
          </div>

          <div class="full-width" id="fwChangeLog">
          </div>

          <div class="full-width">
            <div class="line"></div>
          </div>
          {fwInstall}
          <a id="downloadLink"
            href="https://github.com/HandHeldLegend/ProGCC-V3-RP2040/raw/main/build/PROGCC_RP2040.uf2" download>
            <button type="button" id="fwButton">{download}</button>
          </a>
        </div>

        <!-- BT Baseband Update Box -->
        <div class="message-box" id="baseband-box" disabled="true">

          <h2>{basebandMsg1}</h2>
          {basebandMsg2}
          <div class="row">
          <button disabled type="button" id="basebandButton" onclick="basebandButton()">{baseband}</button></div>
          <div class="full-width">
            <div class="line"></div>
          </div>

          <div class="full-width">
            <div class="row">
            <esp-web-install-button id="install_esp32"
              manifest="https://raw.githubusercontent.com/HandHeldLegend/HOJA-ESP32-Baseband/master/manifest.json"></esp-web-install-button></div>
          </div>
        </div>

        <!-- INITIAL FW INSTALL MSG BOX -->
        <div class="message-box" id="initialize-board-box" disabled="true">

          <h2>{fwMsgInitTitle}</h2>

          <div class="full-width" id="fwInitializeInstructions">
            Placeholder.
          </div>

          <div class="full-width">
            <div class="line"></div>
          </div>

          <a id="downloadLinkInitial"
            href="https://github.com/HandHeldLegend/ProGCC-V3-RP2040/raw/main/build/PROGCC_RP2040.uf2" download>
            <button type="button" id="fwButton">{download}</button>
          </a>
        </div>

        <!-- INFO -->
        <!-- --------------- -->
        <div class="collapsible">

          <input id="info-drop" class="toggle" type="checkbox">

          <label for="info-drop" id="info-toggle" , class="lbl-toggle">{information}</label>
          <div class="dropdown">
            <div class="full-width">
              <div class="collapsible-row-double">
                <row>
                  <h2>Switch Mode</h2>
                  Hold A on plug
                </row>
                <row>
                  <h2>XInput Mode</h2>
                  Hold X on plug
                </row>
              </div>
            </div>

            <div class="line"></div>

            <div class="full-width">
              <div class="collapsible-row-double">

                <row>
                  <h2>GC USB Mode</h2>
                  Hold Y on plug
                </row>
                <row>
                  <h2>GC Mode</h2>
                  Hold D→ on plug
                </row>
              </div>
            </div>

            <div class="line"></div>

            <div class="full-width">
              <div class="collapsible-row-double">
                <row>
                  <h2>N64 Mode</h2>
                  Hold D↓ on plug
                </row>
                <row>
                  <h2>SNES Mode</h2>
                  Hold D← on plug
                </row>
              </div>
            </div>

            <div class="line"></div>

            <div class="full-width">
              <div class="row">
                <button type="button"
                  onclick="window.open('https:/\/\/discord.gg/5z4cFv4rC2', '_blank')">{discord}</button>
                <button type="button" onclick="window.open('https:/\/\/x.com/MitchHHL', '_blank')">{twitter}</button>
              </div>
            </div>

          </div>
        </div>
        <!-- --------------- -->

        <!-- Script to determine if arrows are pressed or released-->
        <script>
          var keysPressed = false;
          var setLaterMain = false;
          var setLaterFloor = false;
          var toSetMain = 0;
          var toSetFloor = 0;
          function areArrowKeysPressed(event) {
            return ['ArrowLeft', 'ArrowRight'].includes(event.key) && (event.type === 'keydown');
          }

          // Usage:
          document.addEventListener('keydown', function (e) {
            if (areArrowKeysPressed(e)) {
              keysPressed = true;
            }
          });

          document.addEventListener('keyup', function (e) {
            if (!areArrowKeysPressed(e)) {
              keysPressed = false;

              if (setLaterMain) {
                vibrate_set_value(toSetMain);
                setLaterMain = false;
              }

              if (setLaterFloor) {
                vibratefloor_set_value(toSetFloor);
                setLaterFloor = false;
              }
            }
          });
        </script>

        <!-- VIBRATION SETTING -->
        <!-- --------------- -->
        <div class="collapsible">

          <input id="vibration_collapsible" class="toggle" type="checkbox">

          <label for="vibration_collapsible" id="vibration_collapsible_toggle"
            class="lbl-toggle">{vibrationTitle}</label>

          <div class="dropdown">
            <div class="full-width">
              <p>{vibrationDesc}</p>
              <div class="slider">
                <input type="range" min="0" max="50" value="0" id="vibeValue"
                  oninput="vibeTextValue.innerText = this.value"
                  onchange="if(!keysPressed){vibrate_set_value(this.value)}else {setLaterMain=true; toSetMain=this.value}">
                <p id="vibeTextValue">0</p>
              </div>
              <div class="line"></div>
              <p>{vibrationDesc2}</p>
              <div class="slider">
                <input type="range" min="0" max="50" value="0" id="vibeFloorValue"
                  oninput="vibeFloorTextValue.innerText = this.value"
                  onchange="if(!keysPressed){vibratefloor_set_value(this.value)}else {setLaterFloor=true; toSetFloor=this.value}">
                <p id="vibeFloorTextValue">0</p>
              </div>
              <div class="row">
                <button type="button" id="save_vibe_button" onclick="saveButton()">{save}</button>
              </div>
            </div>

          </div>
        </div>

        <!-- PROCON COLOR SETTINGS -->
        <div class="collapsible">

          <input id="color-settings" class="toggle" type="checkbox">

          <label for="color-settings" id="color-settings-toggle" , class="lbl-toggle">{colorTitle}</label>
          <div class="dropdown">
            <div id="hojaColorSvg">
              <svg id="colorSvgLoader" class="controller-led" data-src="svg/snescontroller.svg" data-cache="disabled"
                data-unique-ids="disabled" data-css-scoping="disabled"></svg>
            </div>

            <div id="hojaColorPicker">
              <div id="colorPicker"></div>
              <input id="colorHexBox" disabled type="text" value="#FFFFFF"
                onchange="color_hexbox_changed(this.value)" />
              <div class="row">
                <button id="copyButton" class="small" onclick="color_copy()">{copy}</button>
                <button id="pasteButton" class="small" onclick="color_paste()">{paste}</button>
              </div>
            </div>

            <div class="full-width">
              <div class="line"></div>
              <div class="row">
                <button type="button" id="save_color_button" onclick="saveButton()">{save}</button>
              </div>
            </div>


          </div>
        </div>
      </div>

      <!-- SNAPBACK SETTINGS -->
      <!-- ---------------   -->
      <div class="collapsible">
        <input id="snapback-settings" class="toggle" type="checkbox">

        <label for="snapback-settings" id="snapback-settings-toggle" , class="lbl-toggle">{snapbackTitle}</label>
        <div class="dropdown">
          <div class="full-width">
            <p>{snapbackDesc}</p>
            <div class="snapback-visualizer">
              <svg id="waveform-output" width="100%" , height="100%"></svg>
            </div>

          </div>
        </div>
      </div>

      <!-- ANALOG SETTINGS -->
      <!-- --------------- -->
      <div class="collapsible">

        <input id="analog_collapsible" class="toggle" type="checkbox">

        <label for="analog_collapsible" id="analog_collapsible_toggle" class="lbl-toggle">{calibrateTitle}</label>

        <div class="dropdown">

          <div class="content-inner">
            <div class="full-width">
              <p>{calibrateDesc}</p>
            </div>

            <div class="line"></div>

            <div class="collapsible-row-double">
              <div class="collapsible-column">
                <div class="circle" id="left-stick-ui" hidden>
                  <div class="inner-stick"></div>
                  <div class="analog-center"></div>
                  <div id="circle-analog-pointer-l" class="analog-position"></div>
                </div>
              </div>

              <div class="collapsible-column">
                <div class="circle" id="right-stick-ui" hidden>
                  <div class="inner-stick"></div>
                  <div class="analog-center"></div>
                  <div id="circle-analog-pointer-r" class="analog-position"></div>
                </div>
              </div>
              <div class="line"></div>
            </div>
            <div class="row">
              <button type="button" id="start_calibration_button" onclick="analog_start_calibration()">{start}</button>
              <button type="button" id="stop_calibration_button" onclick="analog_stop_calibration()"
                disabled>{stop}</button>
              <button type="button" id="save_calibration_button" onclick="saveButton()">{save}</button>
            </div>
          </div>

        </div>
      </div>

      <!-- OCTAGON SETTINGS -->
      <!-- --------------- -->
      <div class="collapsible">

        <input id="octagon_collapsible" class="toggle" type="checkbox">

        <label for="octagon_collapsible" id="octagon_collapsible_toggle" class="lbl-toggle">{octagonTitle}</label>

        <div class="dropdown">

          <div class="content-inner">
            <div class="full-width">
              <p>{octagonDesc}</p>

              <div class="line"></div>
            </div>

            <div class="collapsible-row-double">

              <div class="collapsible-column">
                <input id="octagon-angle-text-l" type="text" disabled />
                <div class="octagon" id="leftocto-stick-ui" hidden>
                  <div class="inner-stick"></div>
                  <div class="analog-center"></div>
                  <div id="octo-analog-pointer-l" class="analog-position"></div>
                </div>
              </div>

              <div class="collapsible-column">
                <input id="octagon-angle-text-r" type="text" disabled />
                <div class="octagon" id="rightocto-stick-ui" hidden>
                  <div class="inner-stick"></div>
                  <div class="analog-center"></div>
                  <div id="octo-analog-pointer-r" class="analog-position"></div>
                </div>
              </div>
            </div>

            <div class="line"></div>

            <div class="row">
              <button type="button" id="update_octagon_button" onclick="analog_update_octagon()">{update}</button>
              <button type="button" id="save_octagon_button" onclick="saveButton()">{save}</button>
            </div>
          </div>

        </div>
      </div>

      <!-- GYRO SETTINGS -->
      <!-- --------------- -->
      <div class="collapsible">

        <input id="gyro_collapsible" class="toggle" type="checkbox">

        <label for="gyro_collapsible" id="gyro_collapsible_toggle" class="lbl-toggle">{gyroTitle}</label>

        <div class="dropdown">


          <div class="full-width">
            <p>{gyroDesc}</p>


            <div class="line"></div>

            <div class="row">
              <button type="button" id="start_imu_calibration_button" onclick="imu_start_calibration()">{start}</button>
            </div>
          </div>


        </div>
      </div>

      <!-- REMAPPING -->
      <!-- --------------- -->
      <div class="collapsible">

        <input id="remapping" class="toggle" type="checkbox">

        <label for="remapping" id="remapping-toggle" , class="lbl-toggle">{remapTitle}</label>
        <div class="dropdown">

          <div class="full-width">
            <p>{remapDesc}</p>
            <p>{remapDesc2}</p>
            <div class="line"></div>
            <div class="sora_radio_container" id="rp_radio_picker">

              <input type="radio" name="radio_remap_profile" id="rp_switch" checked
                onchange="remap_switch_profile(INPUT_MODE_SWITCH)">
              <label for="rp_switch">Switch</label>

              <input type="radio" name="radio_remap_profile" id="rp_xinput"
                onchange="remap_switch_profile(INPUT_MODE_XINPUT)">
              <label for="rp_xinput" id="rp_xinput_label">XInput</label>

              <input type="radio" name="radio_remap_profile" id="rp_gamecube"
                onchange="remap_switch_profile(INPUT_MODE_GAMECUBE)">
              <label for="rp_gamecube" id="rp_ginput_label">GC</label>

              <input type="radio" name="radio_remap_profile" id="rp_n64"
                onchange="remap_switch_profile(INPUT_MODE_N64)">
              <label for="rp_n64" id="rp_n64_label">N64</label>

              <input type="radio" name="radio_remap_profile" id="rp_snes"
                onchange="remap_switch_profile(INPUT_MODE_SNES)">
              <label for="rp_snes" id="rp_snes_label">SNES</label>

            </div>
          </div>
          <div class="remap-row">
            <!-- A -->
            <button type="button" class="button-map-init" id="bo_a" onclick="remap_init_new(MAPCODE_B_A)">A</button>
            <button type="button" class="button-map-view" id="bi_a">...</button>
          </div>

          <div class="remap-row">
            <!-- B -->
            <button type="button" class="button-map-init" id="bo_b" onclick="remap_init_new(MAPCODE_B_B)">B</button>
            <button type="button" class="button-map-view" id="bi_b">...</button>
          </div>

          <div class="remap-row">
            <!-- X -->
            <button type="button" class="button-map-init" id="bo_x" onclick="remap_init_new(MAPCODE_B_X)">X</button>
            <button type="button" class="button-map-view" id="bi_x">...</button>
          </div>

          <div class="remap-row">
            <!-- Y -->
            <button type="button" class="button-map-init" id="bo_y" onclick="remap_init_new(MAPCODE_B_Y)">Y</button>
            <button type="button" class="button-map-view" id="bi_y">...</button>
          </div>

          <div class="remap-row">
            <!-- Dpad Up -->
            <button type="button" class="button-map-init" id="bo_dup" onclick="remap_init_new(MAPCODE_DUP)">↑</button>
            <button type="button" class="button-map-view" id="bi_dup">...</button>
          </div>

          <div class="remap-row">
            <!-- Dpad Down -->
            <button type="button" class="button-map-init" id="bo_ddown"
              onclick="remap_init_new(MAPCODE_DDOWN)">↓</button>
            <button type="button" class="button-map-view" id="bi_ddown">...</button>
          </div>

          <div class="remap-row">
            <!-- Dpad Left -->
            <button type="button" class="button-map-init" id="bo_dleft"
              onclick="remap_init_new(MAPCODE_DLEFT)">←</button>
            <button type="button" class="button-map-view" id="bi_dleft">...</button>
          </div>

          <div class="remap-row">
            <!-- Dpad Right -->
            <button type="button" class="button-map-init" id="bo_dright"
              onclick="remap_init_new(MAPCODE_DRIGHT)">→</button>
            <button type="button" class="button-map-view" id="bi_dright">...</button>
          </div>

          <div class="remap-row">
            <!-- Plus -->
            <button type="button" class="button-map-init" id="bo_plus"
              onclick="remap_init_new(MAPCODE_B_PLUS)">+</button>
            <button type="button" class="button-map-view" id="bi_plus">...</button>
          </div>

          <div class="remap-row">
            <!-- Minus -->
            <button type="button" class="button-map-init" id="bo_minus"
              onclick="remap_init_new(MAPCODE_B_MINUS)">-</button>
            <button type="button" class="button-map-view" id="bi_minus">...</button>
          </div>

          <div class="remap-row">
            <!-- L -->
            <button type="button" class="button-map-init" id="bo_l" onclick="remap_init_new(MAPCODE_T_L)">L</button>
            <button type="button" class="button-map-view" id="bi_l">...</button>
          </div>

          <div class="remap-row">
            <!-- ZL -->
            <button type="button" class="button-map-init" id="bo_zl" onclick="remap_init_new(MAPCODE_T_ZL)">ZL</button>
            <button type="button" class="button-map-view" id="bi_zl">...</button>
          </div>

          <div class="remap-row">
            <!-- R -->
            <button type="button" class="button-map-init" id="bo_r" onclick="remap_init_new(MAPCODE_T_R)">R</button>
            <button type="button" class="button-map-view" id="bi_r">...</button>
          </div>

          <div class="remap-row">
            <!-- ZR -->
            <button type="button" class="button-map-init" id="bo_zr" onclick="remap_init_new(MAPCODE_T_ZR)">ZR</button>
            <button type="button" class="button-map-view" id="bi_zr">...</button>
          </div>

          <div class="remap-row">
            <!-- Stick L -->
            <button type="button" class="button-map-init" id="bo_stickl"
              onclick="remap_init_new(MAPCODE_B_STICKL)">SL</button>
            <button type="button" class="button-map-view" id="bi_stickl">...</button>
          </div>

          <div class="remap-row">
            <!-- Stick R -->
            <button type="button" class="button-map-init" id="bo_stickr"
              onclick="remap_init_new(MAPCODE_B_STICKR)">SR</button>
            <button type="button" class="button-map-view" id="bi_stickr">...</button>
          </div>

          <div class="full-width">
            <div class="line"></div>
            <div class="row">
              <button type="button" id="reset_remap_button" onclick="remap_set_default()">{reset}</button>
              <button type="button" id="save_remap_button" onclick="saveButton()">{save}</button>
            </div>
          </div>

        </div>
      </div>

      <!-- GAMECUBE SETTINGS -->
      <!-- --------------- -->
      <div class="collapsible">

        <input id="gamecube_collapsible" class="toggle" type="checkbox">

        <label for="gamecube_collapsible" id="gamecube_collapsible_toggle" class="lbl-toggle">{gamecubeTitle}</label>

        <div class="dropdown">

          <div class="full-width">
            <p>{gamecubeDesc}</p>
            <div class="line"></div>
            <div class="sora_radio_container" id="radio_gc_sp_picker">
              <input type="radio" name="radio_gc_sp" id="gc_sp_0" checked onchange="gcsp_set_value(0)">
              <label for="gc_sp_0">Off</label>
              <input type="radio" name="radio_gc_sp" id="gc_sp_1" onchange="gcsp_set_value(1, 0)">
              <label for="gc_sp_1">Light L</label>
              <input type="radio" name="radio_gc_sp" id="gc_sp_2" onchange="gcsp_set_value(2, 0)">
              <label for="gc_sp_2">Light R</label>
              <input type="radio" name="radio_gc_sp" id="gc_sp_3" onchange="gcsp_set_value(3, 0)">
              <label for="gc_sp_3">Reset</label>
              <input type="radio" name="radio_gc_sp" id="gc_sp_4" onchange="gcsp_set_value(4, 0)">
              <label for="gc_sp_4">Dual Z</label>
            </div>
            <div class="line"></div>
            <p>{gamecubeTrigger}</p>
            <div class="slider">
              <input type="range" min="50" max="255" value="50" id="lightValue"
                oninput="lightTextValue.innerText = this.value.toString()" onchange="gcsp_set_value(0xFF, this.value)">
              <p id="lightTextValue">50</p>
            </div>
            <div class="row">
              <button type="button" id="save_remap_button" onclick="saveButton()">{save}</button>
            </div>
          </div>

        </div>
      </div>



    </div>
  </div>
  <!-- --------------- -->



  </div>
  </div>
  </div>
  <div class="footer">
    <a href="https://handheldlegend.github.io/attributions.html" target="_blank">JS/CSS Attributions</a> | Site by Mitch
    Cairns | ©
    2023, Hand Held Legend | Updated 11.3.2023
  </div>
  <script type="module" src="/js/esp32webtool/install-button.js"></script>
  <script src="js/hoja_version.js"></script>
  <script src="js/hoja_global.js"></script>
  <script src="js/hoja_strings.js"></script>
  <script src="js/hoja_gcsp.js"></script>
  <script src="js/hoja_remap.js"></script>
  <script src="js/hoja_snapback.js"></script>
  <script src="js/hoja_analog.js"></script>
  <script src="js/hoja_input.js"></script>
  <script src="js/hoja_color.js"></script>
  <script src="js/svg-loader.min.js"></script>
  <script src="js/iro.min.js"></script>
  <script src="js/hoja_config.js"></script>

</body>

</html>